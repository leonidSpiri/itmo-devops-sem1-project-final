# Финальный проект 1 семестра

REST API сервис на Go для загрузки и выгрузки данных о ценах из PostgreSQL.

Сервис работает на порту `8080`. PostgreSQL должен быть доступен на порту `5432`.

## Требования к системе

### ОС
Подходит Linux или macOS. На Windows лучше запускать через WSL или Docker.

### ПО
- Go (1.23)
- PostgreSQL 15+
- psql и pg_isready (ставятся вместе с `postgresql-client`)
- утилиты `zip`, `unzip`, `tar`, `curl` (необходимы для скрипта тестов)


### СУБД

База данных должна быть поднята заранее и работать на `5432`.

Необходимые параметры:
- user: `validator`
- password: `val1dat0r`
- database: `project-sem-1`

## Установка и запуск

### 1) Подготовка проекта

Скрипт скачивает зависимости Go, проверяет соединение с PostgreSQL и создаёт таблицу `prices` (если её ещё нет).

```bash
./scripts/prepare.sh
```

По умолчанию используются такие значения:

* `POSTGRES_HOST=localhost`
* `POSTGRES_PORT=5432`
* `POSTGRES_DB=project-sem-1`
* `POSTGRES_USER=validator`
* `POSTGRES_PASSWORD=val1dat0r`
* `PORT=8080`

### 2) Запуск сервера

```bash
./scripts/run.sh
```

Сервер поднимается на `http://127.0.0.1:8080`.
Для проверки можно открыть health endpoint:

```bash
curl -i http://127.0.0.1:8080/health
```

## Тестирование

Директория `sample_data` - это пример директории, которая является разархивированной версией файла `sample_data.zip`.

### Локальные проверки API (bash)

Скрипт `tests.sh` делает базовые проверки:

* отправляет POST запрос (загрузка архива)
* проверяет, что API отвечает корректно
* вызывает GET и проверяет, что возвращается zip с `data.csv`

Запуск:

```bash
./scripts/tests.sh <level>
```

Где level - один из трех уровней сложности проверки проекта.

## Контакт

Если возникли вопросы по проекту - пишите мне в issues или через контакты в шапке профиля.
